import axios from 'axios';

const state = {
  // 初始化基础数据
  data: { user: {}, bot: {} },
  // id="0"表示机器人
  messageList: [
    {
      self: false, id: 0, message: { "text": "不知道去哪儿浪，交给我～" }, time: '4:28', flag: 1
    },
    {
      self: false, "id": 0, "flag": 2,
      "message": {
        "text": "您可能感兴趣的标签：",
        "tags": ["云海", "湖泊", "雪山", "日出", "冰川", "峡谷"]
      }
    },
    {
      self: false,
      "id": 0,
      "flag": 3,
      "message": [
        {
          "name": "\u4e50\u5c71\u5927\u4f5b",
          "intro": "\u4e50\u5c71\u5927\u4f5b\uff0c\u53c8\u540d\u51cc\u4e91\u5927\u4f5b\uff0c\u4f4d\u4e8e\u56db\u5ddd\u7701\u4e50\u5c71\u5e02\u5357\u5cb7\u6c5f\u4e1c\u5cb8\u51cc\u4e91\u5bfa\u4fa7\uff0c\u6fd2\u5927\u6e21\u6cb3\u3001\u9752\u8863\u6c5f\u548c\u5cb7\u6c5f\u4e09\u6c5f\u6c47\u6d41\u5904\u3002\u5927\u4f5b\u4e3a\u5f25\u52d2\u4f5b\u5750\u50cf\uff0c\u901a\u9ad871\u7c73\uff0c\u662f\u4e2d\u56fd\u6700\u5927\u7684\u4e00\u5c0a\u6469\u5d16\u77f3\u523b\u9020\u50cf\u3002\u4e50\u5c71\u5927\u4f5b\u5f00\u51ff\u4e8e\u5510\u4ee3\u5f00\u5143\u5143\u5e74\uff08713\u5e74\uff09\uff0c\u5b8c\u6210\u4e8e\u8d1e\u5143\u5341\u4e5d\u5e74\uff08803\u5e74\uff09\uff0c\u5386\u65f6\u7ea6\u4e5d\u5341\u5e74\u3002\u4e50\u5c71\u5927\u4f5b\u548c\u51cc\u4e91\u5c71\u3001\u4e4c\u5c24\u5c71\u3001\u5de8\u5f62\u5367\u4f5b\u7b49\u666f\u70b9\u7ec4\u6210\u7684\u4e50\u5c71\u5927\u4f5b\u666f\u533a\u5c5e\u4e8e\u56fd\u5bb65A\u7ea7\u65c5\u6e38\u666f\u533a\u3002 \u4e50\u5c71\u5927\u4f5b\u662f\u4e00\u5c0a\u5f25\u52d2\u4f5b\uff0c\u5510\u4ee3\u5d07\u62dc\u5f25\u52d2\u4f5b\uff0c\u4f5b\u7ecf\u8bf4\u5f25\u52d2\u51fa\u4e16\u5c31\u4f1a\u201c\u5929\u4e0b\u592a\u5e73\u201d\uff0c\u6b66\u5468\u65f6\u671f\uff0c\u6b66\u5219\u5929\u66fe\u4e0b\u4ee4\u7f16\u9020\u4e86\u4e00\u90e8\u300a\u5927\u4e91\u7ecf\u4e66\u300b\uff0c\u8bc1\u660e\u5979\u662f\u5f25\u52d2\u8f6c\u4e16\uff0c\u767e\u59d3\u5bf9\u5f25\u52d2\u7684\u5d07\u62dc\u5e2e\u52a9\u5979\u5728\u7537\u5c0a\u5973\u5351\u7684\u5c01\u5efa\u65f6\u4ee3\u767b\u4e0a\u5e1d\u4f4d\u3002\u7531\u4e8e\u6b66\u5219\u5929\u7684\u5927\u529b\u63d0\u5021\uff0c\u4f7f\u5168\u56fd\u5851\u51ff\u5f25\u52d2\u4e4b\u98ce\u5927\u884c\u3002\u4e50\u5c71\u5927\u4f5b\u7684\u4fee\u9020\u8ddd\u6b66\u5219\u5929\u65f6\u4ee3\u4ec520\u4f59\u5e74\uff0c\u6240\u4ee5\u5f53\u6d77\u901a\u4fee\u9020\u4e50\u5c71\u5927\u4f5b\u65f6\uff0c\u81ea\u7136\u9009\u62e9\u4e86\u5f25\u52d2\u4f5b\uff0c\u800c\u4e14\u5f25\u52d2\u4f5b\u65e2\u662f\u80fd\u5e26\u6765\u5149\u660e\u548c\u5e78\u798f\u7684\u672a\u6765\u4f5b\uff0c\u8fd9\u540c\u5e73\u606f\u6c34\u60a3\u7684\u9547\u6c5f\u4e4b\u4f5b\u8981\u6c42\u662f\u4e00\u81f4\u7684\u3002",
          "tags": [
            "\u4e00\u5ea7\u5c71",
            "\u4e09\u6c5f\u6c47\u6d41",
            "\u4e00\u5c0a\u6469\u5d16"
          ],
          "plays": [
            "\u770b\u5927\u4f5b",
            "\u5750\u8239"
          ],
          "latitude": 29.55016763,
          "longitude": 103.7780374,
          "id": 0,
          "pic": [
            {
              "tag": "瀑布",
              "name": "瀑布",
              "filepath": "/static/pic/bon-1.png"
            },
            {
              "tag": "翠海",
              "name": "翠海",
              "filepath": "/static/pic/bon-2.png"
            }
          ]
        },
        {
          "name": "\u9752\u57ce\u5c71",
          "intro": "\u90fd\u6c5f\u5830\u5e02\u5883\u897f\u90e8\u7684\u9752\u57ce\u5c71\u662f\u9053\u6559\u53d1\u7965\u5730\u4e4b\u4e00\uff0c\u4e5f\u662f\u6b63\u4e00\u9053\u7684\u7956\u5ead\uff0c\u7d20\u6709\u201c\u9752\u57ce\u5929\u4e0b\u5e7d\u201d\u4e4b\u79f0\u3002\u9752\u57ce\u5c71\u5206\u4e3a\u524d\u5c71\u3001\u540e\u5c71\u4e24\u4e2a\u666f\u533a\u3002\u524d\u5c71\u9762\u79ef\u76f8\u5bf9\u8f83\u5c0f\uff0c\u5bc6\u5e03\u5bab\u89c2\uff0c\u534a\u5929\u65f6\u95f4\u5c31\u53ef\u6e38\u5b8c\u3002\u8fdb\u9752\u57ce\u5c71\u95e8\uff0c\u6b65\u884c15\u5206\u949f\u53ef\u5230\u6708\u6c89\u6e56\uff1b\u82e5\u60f3\u4e58\u7d22\u9053\uff0c\u5fc5\u987b\u5148\u4e58\u8239\u8fc7\u6708\u6c89\u6e56\uff0c\u8239\u7968\u4e3a5\u5143\uff0c\u4e0b\u8239\u518d\u4e58\u7d22\u9053\uff08\u5f80\u8fd450\u5143\uff0c\u5355\u7a0b30\u5143\uff09\u3002\u5230\u8fbe\u540e\u518d\u8d70\u4e00\u6bb5\u5c31\u53ef\u5230\u4e0a\u6e05\u5bab\uff0c\u4e0a\u6e05\u5bab\u518d\u5f80\u4e0a\u5c31\u662f\u8001\u541b\u9601\u3002\u800c\u9752\u57ce\u5c71\u7684\u540e\u5c71\u5219\u9762\u79ef\u8f83\u5927\uff0c\u5e7d\u6df1\u53e4\u96c5\uff0c\u4fdd\u6301\u4e86\u76f8\u5f53\u539f\u59cb\u7684\u98ce\u8c8c\uff0c\u6e38\u89c8\u9700\u8981\u82b1\u4e00\u5929\u65f6\u95f4\uff0c\u7531\u540e\u5c71\u5c71\u811a\u4e0b\u6cf0\u5b89\u5bfa\u5230\u5c71\u9876\u767d\u4e91\u5bfa\uff0c\u81f3\u5c11\u9700\u8981\u4e24\u4e2a\u591a\u5c0f\u65f6\u7684\u65f6\u95f4\uff0c\u6240\u4ee5\u6700\u597d\u80fd\u5728\u4e2d\u5348\u4e4b\u524d\u5c31\u5f00\u59cb\u722c\u5c71\uff0c\u4e00\u65e6\u65f6\u95f4\u665a\u4e86\uff0c\u8fd8\u53ef\u4ee5\u5728\u4e09\u5206\u4e4b\u4e8c\u5904\u7684\u53c8\u4e00\u6751\u4f4f\u5bbf\u3002",
          "tags": [
            "\u6e05\u5e7d",
            "\u9053\u5bb6\u6587\u5316"
          ],
          "plays": [
            "\u722c\u5c71",
            "\u4e2d\u9014\u6e56\u6cca\u53ef\u5750\u8239",
            "\u611f\u53d7\u9053\u6559\u6587\u5316"
          ],
          "latitude": 30.9725319,
          "longitude": 103.5232041,
          "id": 0,
          "pic": [
            {
              "tag": "瀑布",
              "name": "瀑布",
              "filepath": "/static/pic/bon-2.png"
            },
            {
              "tag": "翠海",
              "name": "翠海",
              "filepath": "/static/pic/bon-2.png"
            }
          ]
        },
        {
          "name": "\u7a3b\u57ce\u4e9a\u4e01",
          "intro": "\u8bf4\u5728\u9752\u85cf\u9ad8\u539f\u96ea\u5c71\u6df1\u5904\u7684\u4e00\u4e2a\u9690\u79d8\u5730\u65b9\uff0c\u6709\u4e00\u4e2a\u88ab\u53cc\u5c42\u96ea\u5c71\u73af\u62b1\u738b\u56fd\uff0c\u90a3\u91cc\u6709\u96ea\u5c71\u3001\u51b0\u5ddd\u3001\u5ce1\u8c37\u3001\u68ee\u6797\u3001\u8349\u7538\u3001\u6e56\u6cca\u3001\u91d1\u77ff\u53ca\u7eaf\u51c0\u7684\u7a7a\u6c14\uff0c\u8fd9\u4e2a\u738b\u56fd\u5c31\u662f\u9999\u5df4\u62c9\u738b\u56fd\uff0c\u88ab\u79f0\u4e3a\u6c34\u84dd\u8272\u7684\u661f\u7403\u4e0a\u7684\u6700\u540e\u4e00\u7247\u51c0\u571f\uff0c\u4e5f\u5c31\u662f\u4eca\u5929\u7684\u7a3b\u57ce\u4e9a\u4e01\u3002\u5728\u7a3b\u57ce\u4e9a\u4e01\uff0c\u6781\u76ee\u8fdc\u8df3\uff0c\u5929\u5730\u6d69\u701a\u65e0\u57a0\uff0c\u4e71\u77f3\u94fa\u5929\u76d6\u5730\uff0c\u61be\u4eba\u5fc3\u9b44\uff0c1145\u4e2a\u9ad8\u5c71\u6e56\u6cca\u6563\u843d\u4e8e\u5d99\u5ccb\u4e71\u77f3\u95f4\uff0c\u78a7\u84dd\u5982\u7389\uff0c\u666f\u8272\u6781\u4e3a\u58ee\u89c2\uff0c\u56e0\u800c\u7a3b\u57ce\u4e9a\u4e01\u88ab\u8a89\u4e3a\u6700\u540e\u7684\u9999\u5df4\u62c9\u3002",
          "tags": [
            "\u96ea\u5c71",
            "\u4e94\u8272\u6d77",
            "\u725b\u5976\u6d77",
            "\u73cd\u73e0\u6d77",
            "\u7ea2\u8349\u6ee9",
            "\u6d1b\u7ed2\u725b\u573a"
          ],
          "plays": [
            "\u5f92\u6b65",
            "\u767b\u5c71\u770b\u6d77\u5b50"
          ],
          "latitude": 28.4587236,
          "longitude": 100.3471195,
          "id": 0,
          "pic": [
            {
              "tag": "瀑布",
              "name": "瀑布",
              "filepath": "/static/pic/bon-3.png"
            },
            {
              "tag": "翠海",
              "name": "翠海",
              "filepath": "/static/pic/bon-2.png"
            }
          ]
        },
        {
          "name": "\u5bbd\u7a84\u5df7\u5b50",
          "intro": "\u5bbd\u7a84\u5df7\u5b50\u5403\u4ec0\u4e48\uff1f1. \u201c\u8336\u9a6c\u53e4\u9053\u201d\u3002\u63a5\u5730\u6c14\u7684\u7528\u9910\u73af\u5883\uff0c\u5728\u4eba\u6765\u4eba\u5f80\u7684\u5df7\u5b50\u91cc\u64b8\u4e0a\u4e24\u4e32\u7f8a\u8089\uff0c\u5403\u4e00\u5927\u76c6\u5730\u9053\u7684\u6210\u90fd\u5e72\u9505\u5154\u5934\uff0c\u8ba9\u8bb8\u591a\u6e38\u5ba2\u76f4\u547c\u8fc7\u763e\u3002 2. \u201c\u4e0a\u5e2d\u201d\u3002 \u4e0a\u5e2d\u7684\u9662\u843d\u4ece\u524d\u662f\u5b66\u6821\uff0c\u5929\u4e95\u5185\u522b\u51fa\u5fc3\u88c1\u5730\u7528\u6ce1\u83dc\u575b\u5b50\u505a\u6210\u591c\u706f\u3002\u5e97\u5185\u5356\u7684\u662f\u65b0\u6d3e\u5ddd\u83dc\uff0c\u63a8\u8350\u7af9\u836a\u809d\u818f\u6c64\uff0c\u9752\u7b52\u9c7c\u3002 3. \u201c\u767e\u529b\u5496\u5561\u201d\u3002 \u524d\u5385\u559d\u5496\u5561\uff0c\u540e\u9662\u54c1\u79c1\u623f\u83dc\uff1b\u524d\u5385\u7684\u73bb\u7483\u623f\u5b50\u8ba9\u4f60\u60f3\u7740\u5df4\u9ece\uff0c\u540e\u9662\u78a7\u6c60\u91cc\u7684\u5317\u6597\u4e03\u661f\u8ba9\u4f60\u8fdb\u5165\u9053\u5bb6\u6c1b\u56f4\u3002\u5bbd\u7a84\u5df7\u5b50\u73a9\u4ec0\u4e48\uff1f 1. \u201c\u9646\u798f\u4f1a\u6240\u201d\u3002\u5728\u4f1a\u6240\u89c2\u770b\u96be\u5f97\u4e00\u89c1\u7684\u53d8\u8138\uff0c\u6eda\u706f\uff0c\u4eac\u5267\u7b49\u7279\u8272\u66f2\u827a\u8868\u6f14\uff0c\u4f1a\u8ba9\u4f60\u5bf9\u6210\u90fd\u6709\u66f4\u6df1\u5c42\u6b21\u7684\u4e86\u89e3\u3002 2.\u201c \u80e1\u91cc\u201d\u3002\u6210\u90fd\u7684\u4eba\u6c14\u591c\u5e97\uff0c\u73a9\u7684\u662f\u98ce\u96c5\u7684\u9662\u843d\u6587\u5316\u548c\u6fc0\u8d8a\u7684\u591c\u573a\u6587\u5316\u3002 3.\u201c\u767d\u591c\u201d\u3002\u77bf\u6c38\u660e\u7684\u9152\u5427\u548c\u827a\u672f\u96c6\u6563\u5730\u3002 \u8fd9\u91cc\u4f1a\u5b9a\u671f\u4e3e\u529e\u89c6\u89c9\u3001\u8bd7\u6b4c\u3001\u7535\u5f71\u7c7b\u5148\u950b\u5c55\u89c8\u548c\u8bb2\u5ea7\u3002",
          "tags": [
            "\u6587\u827a",
            "\u8001\u6210\u90fd",
            "\u6162\u8282\u594f"
          ],
          "plays": [
            "\u62cd\u7167",
            "\u638f\u8033\u6735",
            "\u559d\u8336",
            "\u901b\u5403"
          ],
          "latitude": 30.66984203,
          "longitude": 104.0590256,
          "id": 0,
          "pic": [
            {
              "tag": "瀑布",
              "name": "瀑布",
              "filepath": "/static/pic/bon-4.png"
            },
            {
              "tag": "翠海",
              "name": "翠海",
              "filepath": "/static/pic/bon-2.png"
            }
          ]
        },
        {
          "name": "\u8700\u5357\u7af9\u6d77",
          "intro": "\u7fe0\u7532\u5929\u4e0b\u7684\u8700\u5357\u7af9\u6d77\uff0c\u4f4d\u4e8e\u56db\u5ddd\u5357\u90e8\u7684\u5b9c\u5bbe\u5e02\u5883\u5185\uff0c\u7d20\u4ee5\u96c4\u3001\u9669\u3001\u5e7d\u3001\u5cfb\u3001\u79c0\u8457\u540d\uff0c\u5176\u4e2d\u5929\u7687\u5bfa\uff0c\u5929\u5b9d\u5be8\u3001\u4ed9\u5bd3\u6d1e\u3001\u9752\u9f99\u6e56\u3001\u4e03\u5f69\u98de\u7011\u3001\u53e4\u6218\u573a\u3001\u89c2\u4e91\u4ead\u3001\u7fe1\u7fe0\u957f\u5eca\u3001\u8336\u5316\u5c71\u3001\u82b1\u6eaa\u5341\u4e09\u6865\u7b49\u666f\u89c2\u88ab\u79f0\u4e3a\u201c\u7af9\u6d77\u5341\u4f73\u201d\u3002\u8700\u5357\u7af9\u6d77\u666f\u533a\u5185\u5171\u6709\u7af9\u5b50400\u4f59\u79cd\uff0c7\u4e07\u4f59\u4ea9\uff0c\u662f\u6211\u56fd\u6700\u5927\u7684\u96c6\u5c71\u6c34\u3001\u6eb6\u6d1e\u3001\u6e56\u6cca\u3001\u7011\u5e03\u4e8e\u4e00\u4f53\uff0c\u517c\u6709\u5386\u53f2\u60a0\u4e45\u7684\u4eba\u6587\u666f\u89c2\u7684\u6700\u5927\u539f\u59cb\u201c\u7eff\u7af9\u516c\u56ed\u201d\uff1b\u7a7a\u6c14\u6e05\u65b0\uff0c\u7eaf\u51c0\uff0c\u79bb\u5b50\u542b\u91cf\u8f83\u9ad8\uff0c\u662f\u6211\u56fd\u4e00\u7ea7\u73af\u4fdd\u65c5\u6e38\u533a\u3002",
          "tags": [
            "\u7af9\u6d77",
            "\u5929\u7136\u6c27\u5427",
            "\u5367\u864e\u85cf\u9f99",
            "\u5341\u9762\u57cb\u4f0f"
          ],
          "plays": [
            "\u770b\u7af9\u6797",
            "\u559d\u8336\u6253\u9ebb\u5c06",
            "\u5403\u7b0b\u83dc"
          ],
          "latitude": 28.49795059,
          "longitude": 104.9397022,
          "id": 0,
          "pic": [
            {
              "tag": "瀑布",
              "name": "瀑布",
              "filepath": "/static/pic/bon-5.png"
            },
            {
              "tag": "翠海",
              "name": "翠海",
              "filepath": "/static/pic/bon-2.png"
            }
          ]
        }
      ]
    },
    {
      self: false, "id": 0, "flag": 4,
      "message": {
        "name": "\u4e50\u5c71\u5927\u4f5b",
        "intro": "\u4e50\u5c71\u5927\u4f5b\uff0c\u53c8\u540d\u51cc\u4e91\u5927\u4f5b\uff0c\u4f4d\u4e8e\u56db\u5ddd\u7701\u4e50\u5c71\u5e02\u5357\u5cb7\u6c5f\u4e1c\u5cb8\u51cc\u4e91\u5bfa\u4fa7\uff0c\u6fd2\u5927\u6e21\u6cb3\u3001\u9752\u8863\u6c5f\u548c\u5cb7\u6c5f\u4e09\u6c5f\u6c47\u6d41\u5904\u3002\u5927\u4f5b\u4e3a\u5f25\u52d2\u4f5b\u5750\u50cf\uff0c\u901a\u9ad871\u7c73\uff0c\u662f\u4e2d\u56fd\u6700\u5927\u7684\u4e00\u5c0a\u6469\u5d16\u77f3\u523b\u9020\u50cf\u3002\u4e50\u5c71\u5927\u4f5b\u5f00\u51ff\u4e8e\u5510\u4ee3\u5f00\u5143\u5143\u5e74\uff08713\u5e74\uff09\uff0c\u5b8c\u6210\u4e8e\u8d1e\u5143\u5341\u4e5d\u5e74\uff08803\u5e74\uff09\uff0c\u5386\u65f6\u7ea6\u4e5d\u5341\u5e74\u3002\u4e50\u5c71\u5927\u4f5b\u548c\u51cc\u4e91\u5c71\u3001\u4e4c\u5c24\u5c71\u3001\u5de8\u5f62\u5367\u4f5b\u7b49\u666f\u70b9\u7ec4\u6210\u7684\u4e50\u5c71\u5927\u4f5b\u666f\u533a\u5c5e\u4e8e\u56fd\u5bb65A\u7ea7\u65c5\u6e38\u666f\u533a\u3002 \u4e50\u5c71\u5927\u4f5b\u662f\u4e00\u5c0a\u5f25\u52d2\u4f5b\uff0c\u5510\u4ee3\u5d07\u62dc\u5f25\u52d2\u4f5b\uff0c\u4f5b\u7ecf\u8bf4\u5f25\u52d2\u51fa\u4e16\u5c31\u4f1a\u201c\u5929\u4e0b\u592a\u5e73\u201d\uff0c\u6b66\u5468\u65f6\u671f\uff0c\u6b66\u5219\u5929\u66fe\u4e0b\u4ee4\u7f16\u9020\u4e86\u4e00\u90e8\u300a\u5927\u4e91\u7ecf\u4e66\u300b\uff0c\u8bc1\u660e\u5979\u662f\u5f25\u52d2\u8f6c\u4e16\uff0c\u767e\u59d3\u5bf9\u5f25\u52d2\u7684\u5d07\u62dc\u5e2e\u52a9\u5979\u5728\u7537\u5c0a\u5973\u5351\u7684\u5c01\u5efa\u65f6\u4ee3\u767b\u4e0a\u5e1d\u4f4d\u3002\u7531\u4e8e\u6b66\u5219\u5929\u7684\u5927\u529b\u63d0\u5021\uff0c\u4f7f\u5168\u56fd\u5851\u51ff\u5f25\u52d2\u4e4b\u98ce\u5927\u884c\u3002\u4e50\u5c71\u5927\u4f5b\u7684\u4fee\u9020\u8ddd\u6b66\u5219\u5929\u65f6\u4ee3\u4ec520\u4f59\u5e74\uff0c\u6240\u4ee5\u5f53\u6d77\u901a\u4fee\u9020\u4e50\u5c71\u5927\u4f5b\u65f6\uff0c\u81ea\u7136\u9009\u62e9\u4e86\u5f25\u52d2\u4f5b\uff0c\u800c\u4e14\u5f25\u52d2\u4f5b\u65e2\u662f\u80fd\u5e26\u6765\u5149\u660e\u548c\u5e78\u798f\u7684\u672a\u6765\u4f5b\uff0c\u8fd9\u540c\u5e73\u606f\u6c34\u60a3\u7684\u9547\u6c5f\u4e4b\u4f5b\u8981\u6c42\u662f\u4e00\u81f4\u7684\u3002",
        "tags": [
          "\u4e00\u5ea7\u5c71",
          "\u4e09\u6c5f\u6c47\u6d41",
          "\u4e00\u5c0a\u6469\u5d16"
        ],
        "plays": [
          "\u770b\u5927\u4f5b",
          "\u5750\u8239"
        ],
        "latitude": 29.55016763,
        "longitude": 103.7780374,
        "id": "0",
        "pic": [
          {
            "tag": "瀑布",
            "name": "瀑布",
            "filepath": "/static/pic/bon-1.png"
          },
          {
            "tag": "翠海",
            "name": "翠海",
            "filepath": "/static/pic/bon-2.png"
          }]
      }
    },
    {
      self: false, "id": 0, "flag": 6,
      "message": {
        "latitude": 29.54414,
        "longitude": 103.77232,
        "path": [
          [
            103.77232,
            29.54414
          ],
          [
            103.7510354,
            29.52016773
          ],
          [
            103.7680344,
            29.52016733
          ]
        ],
        "markers": [
          {
            "position": [
              103.77232,
              29.54414
            ],
            "label": {
              "content": "1.乐山大佛",
              "offset": [
                0,
                0
              ]
            }
          },
          {
            "position": [
              103.7510354,
              29.52016773
            ],
            "label": {
              "content": "2.赛里木湖",
              "offset": [
                0,
                0
              ]
            }
          },
          {
            "position": [
              103.7680344,
              29.52016773
            ],
            "label": {
              "content": "3.喀纳斯",
              "offset": [
                0,
                0
              ]
            }
          }
        ]
      }
    }
  ],
}

const getters = {
  // 对当前消息队列中的消息进行加工，添加对应的好友资料
  nowMessageList() {
    return state.messageList
  }
}

const mutations = {
  getData(state, data) {
    // 将ajax获取到的值赋予state
    state.data = data
    // ajax状态更改为结束
    // state.isAjax = true
  },
  // 消息队列，聊天队列处理
  changeList(state, obj) {
    let now = new Date()
    let time = `${now.getHours()}:${now.getMinutes()}`
    state.messageList.push({ ...obj, time })
  }
}

const actions = {
  // 异步获取基础数据
  // 这里使用了es7的async函数，相当于封装了promis的generator
  getAllData: async ({ commit }) => {
    // 声明变量用来存放之后获得的数据
    let user = {}
    let bot = {}
    await axios.get('/mock/userInfo')
      .then((res) => {
        user = res.data
      })
    await axios.get('/mock/botInfo')
      .then((res) => {
        bot = res.data
      })
    commit('getData', {
      user, bot
    })
  },
  // 聊天机器人
  sendValue: async ({ commit }, { id, message, user_flag }) => {
    // 声明一个变量用来储存等下ajax获取的数据
    let robotData = ''
    // 处理输入的内容，设置self为true，作为一个标记。
    commit('changeList', { self: true, id, message, user_flag })
    await axios.get('/mock/chatmessage', {
      params: {
        id,
        user_flag,
        message
      }
    }).then(res => {
      // 将获取到的数据赋值给先前设置的变量
      robotData = res.data
      commit('changeList', { self: false, ...robotData })
    })
  }
}

export default {
  state,
  getters,
  mutations,
  actions
}